# Задание по лекции №26

## Веб-приложение "Рецепты"

### Функциональность:

1. Поиск рецепта по имени или части имени блюда
2. Добавление рецепта - рецепт состоит из множества ингредиентов и их количественного состава
3. Удаление блюда


### Сборка проекта

Для запуска приложения необходимо скомпилировать проект, выполнив
команду в консоли, в директории проекта

`maven install`

Затем необходимо зедеплоить проект в Tomcat (переместить скомпилированный war в папку webapps в tomcat):


## Реализация

Реализация поставленной задачи осуществляется при помощи
трёх основных пакетов данного приложения:

1. **dao** - взаимодействие с сущностями базы данных 
2. **service** - взаимодействие с модулем dao для получения / изменения / добавления
информации в базу данных и получение необходимой информации для представления
3. **web** взаимодействие с клиентом и модулем service для получения / изменения информации из бд
4. **utils** пакет вспомогательных функций системы


### JSP Шаблоны страниц

В директории src/main/webapp содержатся все шаблоны представлений веб-приложения.
В папке resources данной директории находятся файлы стилей и javascript
библиотеки. Для стилезации элементов использован обычный css.

В веб-приложении использованы следующие библиотеки:

1. jQuery - для подключения дополнительных библиотек
2. Bootstrap - для стилезации форм приложения
3. Font Awesome - для реализации стилизованных иконок приложения
4. jQuery UI - для подключения функции автокомплита

### Общее описание системы

Большинство функций системы, таких как добавление / удаление / редактирование 
рецепта (ингредиента, единицы измерения) выполнено при помощи ajax запросов. 
Данное решение было принято в связи с желанием изучить методы взаимодействия с 
приложением при помощи json сообщений и обеспечить человеко-понятный интерфейс 
для удобства использования пользователем.

Все запросы на выборку списка элементов из БД ограничены определённым числом.
На сайте реализованы функции добавления / редактирования / удаления для следующих сущностей:

1. Рецепт
2. Ингредиент
3. Единица измерения
4. Картинка рецепта
5. Ингредиент рецепта

Кроме перечисленных функций также реализован поиск рецептов, ингредиентов 
и единиц измерения по названию. Поиск ингредиентов и единиц измерения по 
названию используется при добавлении ингредиента к рецепту: пользователь 
начинает вводить название необходимого ингредиента (единицы измерения) в 
поле ввода, а система отправляет ajax запрос на поиск данного ингредиента 
в базе данных. В качестве развития данного момента можно реализовать 
добавление нового ингредиента в случае, если искомый ингредиент не найден 
в базе данных.


### Немного скриншотов приложения

#### Главная страница

![alt tag] (http://dl1.joxi.net/drive/2016/11/25/0014/1533/939517/17/d2b311d1ef.jpg)


![alt tag] (http://dl1.joxi.net/drive/2016/11/25/0014/1533/939517/17/d2baf9d727.jpg)


#### Детальная страница рецепта

![alt tag] (http://dl2.joxi.net/drive/2016/11/25/0014/1533/939517/17/c1b7428851.jpg)


![alt tag] (http://dl2.joxi.net/drive/2016/11/25/0014/1533/939517/17/02c4754f64.jpg)


#### Редактирование рецепта


![alt tag] (http://dl2.joxi.net/drive/2016/11/25/0014/1533/939517/17/2120bedf84.jpg)


#### Добавление ингредиента к рецепту


![alt tag] (http://dl1.joxi.net/drive/2016/11/25/0014/1533/939517/17/c40352b5bd.jpg)


#### Добавление нового ингредиента


![alt tag] (http://dl1.joxi.net/drive/2016/11/25/0014/1533/939517/17/f931c30ff2.jpg)


#### Редактирование единицы измерения


![alt tag] (http://dl1.joxi.net/drive/2016/11/25/0014/1533/939517/17/f18d7005a3.jpg)


#### Поиск рецепта


![alt tag] (http://dl2.joxi.net/drive/2016/11/25/0014/1533/939517/17/c010a1e024.jpg)


### Описание структуры и пакетов приложения

### Ресурсы src\main\resources

В данной директории находятся настройки базы данных, hibernate, 
файл для создания таблиц базы данных, а также импорта начальных ингредиентов
и единиц измерения.


### Пакет dao:

Данный пакет содержит интерфейсы по взаимодействию с сущностями базы данных,
описанных в пакете **entities**. В пакете **core** находятся 
реализации этих интерфейсов. Основной класс AbstractDao содержит общую
для всех интерфейсов логику управления сущностями БД и доступный на уровне
пакета менеджер сущностей базы данных.

### Пакет service:

Содержит интерфейсы для взаимодействия с модулем dao с целью валидации и
модификации сущностей БД, т.е. логику взаимодействия с сущностями. Полученные
из БД данные экранируются от представления при помощи идентичных сущностям БД
объектам, содержащихся в пакете **entities**. В пакете **core** 
содержатся реализации сервисных интерфейсов.


### Пакет utils:

Содержит:

1. общий для всех пакетов тип ошибок BusinessException
2. Вспомогательный класс для оборачивания схожих методов для отлова ошибок
3. Класс ResponseValue для создания единого ответа на ajax запросы
4. Класс для валидации форм добавления сущностей
5. Вспомогательные классы для осуществления постраничной навигации


### Пакет web:

В пакете **config** содержит настройку веб-приложения и 
подключения / настройку базы данных.

В пакете **controllers** находятся все контроллеры, для обработки
запросов приложения. Пакете **ajax** содержит REST контроллеры.

